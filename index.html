<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <base data-ice="baseUrl">
  <title data-ice="title">API Document</title>
  <link type="text/css" rel="stylesheet" href="css/style.css">
  <link type="text/css" rel="stylesheet" href="css/prettify-tomorrow.css">
  <script src="script/prettify/prettify.js"></script>
  
  
</head>
<body class="layout-container">

<header>
  <a href="./">Home</a>
  <a href="identifiers.html">Identifier</a>
  <a href="source.html">Source</a>
  <a href="test.html" data-ice="testLink">Test</a>
  <a data-ice="repoURL" href="git://github.com/bem-site/broken-links-checker.git">Repository</a>
  <div class="search-box">
  <span>
    <img src="./image/search.png">
    <span class="search-input-edge"></span><input class="search-input"><span class="search-input-edge"></span>
  </span>
    <ul class="search-result"></ul>
  </div>
</header>

<nav class="navigation" data-ice="nav"><div data-ice="classWrap">
  <h2>Class</h2>
  <ul>
    
  <li data-ice="classDoc"><span><a href="class/src/base.es6~Base.html">Base</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/based-option.es6~BasedOption.html">BasedOption</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/model/broken.es6~BrokenUrls.html">BrokenUrls</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/checker.es6~Checker.html">Checker</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/model/document.es6~Document.html">Document</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/link-analyzer.es6~LinkAnalyzer.html">LinkAnalyzer</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/model/model.es6~Model.html">Model</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/reporters/base.es6~ReporterBase.html">ReporterBase</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/reporters/html.es6~ReporterHtml.html">ReporterHtml</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/reporters/json.es6~ReporterJson.html">ReporterJson</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/model/statistic.es6~Statistic.html">Statistic</a></span></li>
<li data-ice="classDoc"><span><a href="class/src/util.es6~Util.html">Util</a></span></li>
</ul>
</div>



<div data-ice="functionWrap">
  <h2><a href="function/">Function</a></h2>
  <ul>
    
  <li data-ice="functionDoc"><span><a href="function/index.html#static-function-cmdconfig">cmdconfig</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-cmdrun">cmdrun</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-cmdversion">cmdversion</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-createConfigFile">createConfigFile</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-createConfigStub">createConfigStub</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-createConfigsDir">createConfigsDir</a></span></li>
<li data-ice="functionDoc"><span><a href="function/index.html#static-function-run">run</a></span></li>
</ul>
</div>






</nav>

<div class="content" data-ice="content"><div data-ice="index"><!-- # broken-links-checker -->
<p>Broken links checker for website pages</p>
<p><a href="http://www.npmjs.org/package/bs-broken-links-checker"><img src="http://img.shields.io/npm/v/bs-broken-links-checker.svg?style=flat" alt="NPM version"></a>
<a href="https://coveralls.io/r/bem-site/broken-links-checker?branch=master"><img src="https://img.shields.io/coveralls/bem-site/broken-links-checker/master.svg" alt="Coveralls branch"></a>
<a href="https://travis-ci.org/bem-site/broken-links-checker"><img src="https://img.shields.io/travis/bem-site/broken-links-checker.svg" alt="Travis"></a>
<a href="https://codeclimate.com/github/bem-site/broken-links-checker"><img src="https://codeclimate.com/github/bem-site/broken-links-checker/badges/gpa.svg" alt="Code Climate"></a>
<a href="https://david-dm.org/bem-site/broken-links-checker"><img src="https://img.shields.io/david/bem-site/broken-links-checker.svg" alt="David"></a></p>
<p><img src="./logo.gif" alt="GitHub Logo"></p>
<p><a href="./README.ru.md">RUSSIAN DOCUMENTATION</a></p>
<h2 id="working-with-help-of-command-line-interface-cli-">Working with help of command line interface (cli)</h2>
<p>Broken links checker can be used as single <a href="http://nodejs.org">NodeJS</a> application and as <a href="https://www.npmjs.com">npm</a> - dependency which can be plugged to your package.</p>
<p>At first case, you should:</p>
<ul>
<li>clone project repo to your local filesystem</li>
<li>checkout to last stable tag</li>
<li>install <a href="https://www.npmjs.com">npm</a> dependencies and compile runtime code<pre><code><pre class="source-code"><code class="prettyprint">$ git clone https://github.com/bem-site/broken-links-checker.git
$ cd broken-links-checker
$ git checkout vx.y.z
$ npm run deps</code></pre>
</code></pre></li>
</ul>
<p>At second case you should simply install project as yet another <a href="https://www.npmjs.com">npm</a> - package:</p>
<pre><code><pre class="source-code"><code class="prettyprint">$ npm install --save bs-broken-links-checker</code></pre>
</code></pre><h3 id="usage-">Usage:</h3>
<p>Usage of broken-links-checker tool from cli consists of 3 steps:</p>
<ol>
<li>Configuration file generation with help of <a href="#config">config</a> command.</li>
<li>Run site analyze process with <a href="#run">run</a> command.</li>
<li>View generated <code>*.html</code> report file.</li>
</ol>
<h3 id="commands">Commands</h3>
<ul>
<li><a href="#config">config</a> - configuration file generation</li>
<li><a href="#run">run</a> - launch tool</li>
<li><a href="#version">version</a> - view tool version</li>
</ul>
<h3 id="config">config</h3>
<p>You can use this command to generate tool configuration file with <code>.js</code> extension.
It is suitable to have configuration file by 2 reasons:</p>
<ul>
<li><ul>
<li>some options value are too complex and can not be simply passed from cli.</li>
</ul>
</li>
<li><ul>
<li>usage advantages. (You can set all you parameters in single configuration file.</li>
</ul>
</li>
</ul>
<h5 id="parameters-">Parameters:</h5>
<ul>
<li><code>name</code> - configuration file name. It is good practice to use your target website host name
as value of this parameter.</li>
</ul>
<p>Usage example:</p>
<pre><code><pre class="source-code"><code class="prettyprint">$ node bin/blc config -n my.broken-site.com</code></pre>
</code></pre><p>Expected console output:</p>
<pre><code><pre class="source-code"><code class="prettyprint">INFO acts/config.js: Configuration file: =&gt; my.broken-site.com.js has been generated successfully</code></pre>
</code></pre><p><strong>Notation</strong>: generated configuration file <code>my.broken-site.com.js</code> will be placed into <code>./configs</code> folder
inside process working directory.</p>
<h4 id="configuration-file-structure-">Configuration file structure:</h4>
<p>Configuration file is simple <a href="http://nodejs.org">NodeJS</a> module, which exports object where keys are
names of options and values are option values.</p>
<ul>
<li><p><code>url</code> - url of website, website section or even single website page which should be analyzed for broken links.</p>
</li>
<li><p><code>logger</code> - allows to set log verbosity mode. Available values for log level are:
<code>level</code>: &apos;verbose&apos;, &apos;debug&apos;, &apos;info&apos;, &apos;warn&apos;, &apos;error&apos;;</p>
</li>
<li><p><code>concurrent</code> - number of inner website links which would be analyzed concurrently. The optimal value of this param should be found empirically. If this value is too low then total time of website analyze will increase. If this value is too high then workload your website server will increase and cause some network errors and result corruptions.</p>
</li>
</ul>
<p><strong>Notation</strong>: this parameter is applicable only for inner links. All external links are checked by 100 items concurrently.</p>
<ul>
<li><p><code>requestHeaders</code> - allows to set custom request headers.</p>
</li>
<li><p><code>requestRetriesAmount</code> - max request attempts for one analyzed url before it will be resolved as broken.</p>
</li>
</ul>
<p><strong>Notation</strong>: this parameter is applicable only for inner links.
For external links value of <code>requestRetriesAmount</code> parameter is equal to 1.</p>
<ul>
<li><p><code>requestTimeout</code> - max server response waiting time per request (in milliseconds).</p>
</li>
<li><p><code>acceptedSchemes</code> - permitted url schemas. All links which urls contains schemas different from
listed here will be excluded from analyze.</p>
</li>
<li><p><code>checkExternalUrls</code> - enables or disables external links check. If value of this param is equal to
<code>false</code>, then only inner links of website will be analyzed.</p>
</li>
<li><p><code>excludeLinkPatterns</code> - allows to set url patterns which should be excluded from analyze. For example if
you want to exclude all nested links of <code>/contacts</code> website section, then set as value of
<code>excludeLinkPatterns</code> option:</p>
<pre><code><pre class="source-code"><code class="prettyprint">module.exports = {
  ...
  &quot;excludeLinkPatterns&quot;: [
      /\/contacts/
  ]
}</code></pre>
</code></pre></li>
</ul>
<h3 id="run">run</h3>
<p>Launches website analyze process for existed broken links verification.</p>
<h5 id="parameters-">Parameters:</h5>
<ul>
<li><p><code>-c</code> or <code>--config</code>: Path to <a href="#user-content-configuration-file-structure">configuration file</a>. Required parameter.</p>
</li>
<li><p><code>-u</code> or <code>--url</code>: Allows to override url of website (section, page) from <a href="#user-content-configuration-file-structure">configuration file</a>.</p>
</li>
<li><p><code>-cc</code> or <code>--concurrent</code>: Allows to override <code>concurrent</code> parameter from <a href="#user-content-configuration-file-structure">configuration file</a>.</p>
</li>
<li><p><code>-rra</code> or <code>--requestRetriesAmount</code>: Allows to override <code>requestRetriesAmount</code> parameter from <a href="#user-content-configuration-file-structure">configuration file</a>.</p>
</li>
<li><p><code>-rt</code> or <code>--requestTimeout</code>: Allows to override <code>requestTimeout</code> from <a href="#user-content-configuration-file-structure">configuration file</a>.</p>
</li>
<li><p><code>-ext</code> or <code>--checkExternalUrls</code>: Allows to override <code>checkExternalUrls</code> parameter from <a href="#user-content-configuration-file-structure">configuration file</a>.</p>
</li>
<li><p><code>-m</code> or <code>--mode</code>: this parameter can have one of 3 available values: &apos;website&apos; (by default), &apos;section&apos; and &apos;page&apos;.</p>
</li>
</ul>
<p><strong>Notation:</strong></p>
<p>Sometimes it conveniently to scan only separate section of website or even single page. Your can use  <code>mode</code> option for this.</p>
<p>If value of <code>mode</code> option is equal to &apos;section&apos; then only nested pages of <code>url</code> option value will be scanned. For example if website <code>my.site.com</code> (which configuration file is in <code>./configs</code> folder and has name <code>my.site.com.js</code>) has structure as given here:</p>
<pre><code><pre class="source-code"><code class="prettyprint">/
/foo
/foo/foo1
/foo/foo2
/bar</code></pre>
</code></pre><p> then <code>run</code> command with given options:</p>
<pre><code><pre class="source-code"><code class="prettyprint"> $ node bin/blc run -c ./configs/my.site.com.js -u http://my.site.com/foo -m section</code></pre>
</code></pre><p>will cause the analyze only of pages: <code>/foo</code>, <code>/foo1</code>, <code>/foo2</code>. Page &apos;/bar&apos; will be omitted.</p>
<p>If value of <code>mode</code> option is equal to &apos;page&apos;, then <code>run</code>:</p>
<pre><code><pre class="source-code"><code class="prettyprint">$ node bin/blc run -c ./configs/my.site.com.js -u http://my.site.com/foo -m page</code></pre>
</code></pre><p>will cause the links analyze only for <code>/foo</code> page.</p>
<h4 id="examples-of-run-command-usage-">Examples of <code>run</code> command usage:</h4>
<ul>
<li><p>Simple call with configuration file param</p>
<pre><code><pre class="source-code"><code class="prettyprint">$ node bin/blc run -c ./configs/my.site.com.js</code></pre>
</code></pre></li>
<li><p>Analyze for website <code>http://my.another.site.com</code> with configuration file from another website <code>my.site.com</code>.</p>
<pre><code><pre class="source-code"><code class="prettyprint">$ node bin/blc run -c ./configs/my.site.com.js -u http://my.another.site.com</code></pre>
</code></pre></li>
<li><p>Overriding some of configuration file properties.</p>
<pre><code><pre class="source-code"><code class="prettyprint">$ node bin/blc run -c ./configs/my.site.com.js -cc 50 -rt 10000 -rra 20</code></pre>
</code></pre></li>
<li><p>Selective analyze for page <code>/foo/bar</code> of website <code>http://my.site.com</code>.</p>
<pre><code><pre class="source-code"><code class="prettyprint">$ node bin/blc run -c ./configs/my.site.com.js -u http://my.site.com/foo/bar -m page</code></pre>
</code></pre></li>
</ul>
<h4 id="result-of-run-command-execution-">Result of <code>run</code> command execution:</h4>
<p>All total results of analyze will be printed into console output after <code>run</code> command execution. Also generated reports file paths will be placed there.</p>
<h3 id="version">version</h3>
<p>This command will simply print current application version to console.
Usage example:</p>
<pre><code><pre class="source-code"><code class="prettyprint">$ node bin/blc version</code></pre>
</code></pre><p>Expected console output (version can differ from value here):</p>
<pre><code><pre class="source-code"><code class="prettyprint">INFO cli/cmd-version.js: Application name: =&gt; bs-broken-links-checker
INFO cli/cmd-version.js: Application version: =&gt; 0.0.1</code></pre>
</code></pre><h2 id="javascript-api">JavaScript API</h2>
<p>Package can be installed as usual <a href="https://www.npmjs.com">npm</a> dependency.</p>
<pre><code><pre class="source-code"><code class="prettyprint">$ npm install --save bs-broken-links-checker</code></pre>
</code></pre><p>For tool initialization you should create new instance of <code>BrokenLinksChecker</code> class.</p>
<pre><code><pre class="source-code"><code class="prettyprint">var BrokenLinksChecker = require(&apos;bs-broken-links-checker&apos;).BrokenLinksChecker,
    brokenLinksChecker = new BrokenLinksChecker();</code></pre>
</code></pre><p>You should call method <code>start</code> and pass url of your website as argument, for example:</p>
<pre><code><pre class="source-code"><code class="prettyprint">brokenLinksChecker.start(&apos;https://my.site.com&apos;);</code></pre>
</code></pre><p><code>BrokenLinksChecker</code> class constructor takes options object as argument. More detail about available option fields.</p>
<h4 id="options">Options</h4>
<h5 id="concurrent">concurrent</h5>
<p>Number of inner website links which would be analyzed concurrently. The optimal value of this param should be found empirically. If this value is too low then total time of website analyze will increase. If this value is too high then workload your website server will increase and cause some network errors and result corruptions.</p>
<p>Value by default: <code>100</code>.</p>
<p><strong>Notation</strong>: this parameter is applicable only for inner links. All external links are checked by 100 items concurrently.</p>
<h5 id="requestheaders">requestHeaders</h5>
<p>Allows to set custom request headers.</p>
<p>Value by default: <code>{ &apos;user-agent&apos;: &apos;node-spider&apos; }</code>.</p>
<h5 id="requestretriesamount">requestRetriesAmount</h5>
<p>Max request attempts for single analyzed url before it will be resolved as broken.</p>
<p><strong>Notation</strong>: this parameter is applicable only for inner links.
For external links value of <code>requestRetriesAmount</code> parameter is equal to 1.</p>
<p>Value by default: 5.</p>
<h5 id="requesttimeout">requestTimeout</h5>
<p>Request timeout in milliseconds.</p>
<p>Value by default: 5000.</p>
<h5 id="acceptedschemes">acceptedSchemes</h5>
<p>Permitted url schemas. All links which urls contains schemas different from
listed here will be excluded from analyze.</p>
<p>Value by default: <code>[&apos;http:&apos;, &apos;https:&apos;]</code>.</p>
<h5 id="checkexternalurls">checkExternalUrls</h5>
<p>Enables or disables external links check. If value of this param is equal to
<code>false</code>, then only inner links of website will be analyzed..</p>
<p>Value by default: <code>false</code></p>
<h5 id="excludelinkpatterns">excludeLinkPatterns</h5>
<p>Allows to exclude some url patterns from processing. You can pass the array of regular expressions as value of this option. All url that matches on any of listed expressions will be excluded from processing. For example if you want to exclude pages that urls contains <code>foo</code> or <code>bar</code> you can set this option value as: <code>[/\/foo/i, /\/bar/i]</code>.</p>
<p>Value by default: <code>[]</code></p>
<h5 id="ondone">onDone</h5>
<p>Callback function which will be fired on the end of analyze. This function takes instance of <a href="./src/model/statistic.es6">Statistic</a> class. It has all fields and methods for working with results of
scan.</p>
<p>You can see usage examples <a href="./examples">here</a>.</p>
<h2 id="testing">Testing</h2>
<p>Launch of tests with <a href="https://www.npmjs.com/package/istanbul">istanbul</a> coverage calculation:</p>
<pre><code><pre class="source-code"><code class="prettyprint">$ npm test</code></pre>
</code></pre><p>Code syntax check with help of:
<a href="https://www.npmjs.com/package/jshint">jshint</a>,
<a href="https://www.npmjs.com/package/jscs">jscs</a></p>
<pre><code><pre class="source-code"><code class="prettyprint">$ npm run codestyle</code></pre>
</code></pre><p>Special thanks to:</p>
<ul>
<li><a href="http://github.com/tavriaforever">Ilchenko Nikolai</a></li>
<li><a href="http://github.com/gela-d">Konstantinova Gela</a></li>
<li><a href="http://github.com/tadatuta">Grinenko Vladimir</a></li>
<li><a href="https://github.com/blond">Abramov Andrey</a></li>
<li><a href="https://github.com/SwinX">Isupov Ilia</a></li>
</ul>
<p>Developer: <a href="https://github.com/tormozz48">Kuznetsov Andrey</a></p>
<p>You can send your questions and proposals to <a href="mailto:andrey.kuznetsov48@yandex.ru">adress</a> or create issues <a href="https://github.com/bem-site/broken-links-checker/issues">here</a>.</p>
</div>
</div>

<footer class="footer">
  Generated by <a href="https://esdoc.org">ESDoc<span data-ice="esdocVersion">(0.2.1)</span></a>
</footer>

<script src="script/search_index.js"></script>
<script src="script/search.js"></script>
<script src="script/pretty-print.js"></script>
<script src="script/inherited-summary.js"></script>
<script src="script/test-summary.js"></script>
<script src="script/inner-link.js"></script>
<script src="script/patch-for-local.js"></script>
</body>
</html>
